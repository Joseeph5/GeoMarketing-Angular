

<div class="col-md-1 ng">
    <div class="list-group affix_dash" id="sidebar">
      <a routerLink="/dashboard" class="list-group-item active main-color-bg">
        <i class="material-icons mg-icon">dashboard </i>
      </a>
      <a routerLink="/planning" class="list-group-item"> <i class="material-icons mg-icon">edit </i></a>
      <a routerLink="/tracking" class="list-group-item"> <i class="material-icons mg-icon">track_changes </i></a>
      <a routerLink="/missions" class="list-group-item"><i class="material-icons mg-icon">list </i> </a>
      <a routerLink="/driver" class="list-group-item"><i class="material-icons mg-icon">person</i> </a>
      <a routerLink="/groups" class="list-group-item"><i class="material-icons mg-icon">group</i> </a>
      <a routerLink="/cars" class="list-group-item"><i class="material-icons mg-icon">directions_car</i></a>
      
  
    </div>
</div>




<div class="col-md-offset-1 pd">

    <div class="panel panel-default">
      <div class="panel-heading main-color-bg">
        <h3 class="panel-title panel-text" style="color:#ecf0f1;">Les Missions</h3>
      </div>
      <div class="panel-body">
        
            <div class=" col-md-offset-11">
                <button type="button" class="btn btn-success"  (click)="openDialog()">Add</button>
              </div>   
            
        <br>
        
          <div class=" col-md-offset-0">
            <ngx-datatable 
                #mydatatable
                class="material"
                [headerHeight]="50"
                [limit]="10"
                [columnMode]="'force'"
                [footerHeight]="50"
                [rowHeight]="'auto'"
                [rows]="rows">
                <ngx-datatable-column name="idmission">
                  <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex"  let-row="row">
                    <span
                      title="Double click to edit"
                      (dblclick)="editing[rowIndex + '-idmission'] = true"
                      *ngIf="!editing[rowIndex + '-idmission']">
                      {{row.idmission}}
                    </span>
                    <input
                      autofocus
                      (blur)="updateValue($event, 'idmission', rowIndex)"
                      *ngIf="editing[rowIndex+ '-idmission']"
                      type="text"
                      [value]="value"
                    />
                  </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="date_deb"> 
                  <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value" let-row="row">
                    <span
                      title="Double click to edit"
                      (dblclick)="editing[rowIndex + '-date_deb'] = true"
                      *ngIf="!editing[rowIndex + '-date_deb']">
                      {{row.date_deb}}
                    </span>
                    <input
                      autofocus
                      (blur)="updateValue($event, 'date_deb', rowIndex)"
                      *ngIf="editing[rowIndex+ '-date_deb']"
                      type="text" 
                      [value]="value"
                    />
                  </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="date_fin">
                  <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value" let-row="row">
                    <span
                      title="Double click to edit"
                      (dblclick)="editing[rowIndex + '-date_fin'] = true"
                      *ngIf="!editing[rowIndex + '-date_fin']">
                      {{row.date_fin}}
                    </span>
                    <input
                      autofocus
                      (blur)="updateValue($event, 'date_fin', rowIndex)"
                      *ngIf="editing[rowIndex+ '-date_fin']"
                      type="text"
                      [value]="value"
                    />
                  </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="Nom du conducteur">
                  <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex"  let-row="row">
                    <span
                      title="Double click to edit"
                      (dblclick)="editing[rowIndex + '-iddriver'] = true"
                      *ngIf="!editing[rowIndex + '-iddriver']">
                      {{row.iddriver.first_name}} {{row.iddriver.last_name}}
                    </span>
                    <input
                      autofocus
                      (blur)="updateValue($event, 'iddriver', rowIndex)"
                      *ngIf="editing[rowIndex+ '-iddriver']"
                      type="text"
                      [value]="value"
                    />
                  </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="Vehicule Marque">
                    
                  <ng-template ngx-datatable-cell-template >
                      <mat-form-field>
                          <mat-label>choisir les points d'interet</mat-label>
                          <mat-select [(ngModel)]="carselected" >
                            <mat-option *ngFor="let car of cars" [value]="car.vehicule_id" >{{car.mark}}</mat-option>
                          </mat-select>
                        </mat-form-field>
                    <!-- <span
                      title="Double click to edit"
                      (dblclick)="editing[rowIndex + '-idvehicule'] = true"
                      *ngIf="!editing[rowIndex + '-idvehicule.mark']">
                      {{row.idvehicule.mark}}
                    </span>
                    <input
                      autofocus
                      (blur)="updateValue($event, 'idvehicule', rowIndex)"
                      *ngIf="editing[rowIndex+ '-idvehicule']"
                      type="text"
                      [value]="value"
                    /> -->
                  </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="Action" prop="idmission" [sortable]="false">
                  <ng-template let-rowIndex="rowIndex" let-id="value" ngx-datatable-cell-template>
                    <button class="btn btn-sm btn-danger" (click)="delete(id)">
                      <i class="fa fa-trash"></i> Delete
                    </button>
                    <button  class="btn btn-sm btn-primary rightpos" (click)="navigateToReportion(id)">
                      <i class="fa fa-trash"></i> Rapport
                     
                    </button>
                    <button  class="btn btn-sm btn-success rightpos" (click)="navigateToSuivi(id)">
                      <i class="fa fa-trash"></i> Suivi
                     
                    </button>
                  </ng-template>
                </ngx-datatable-column>
              </ngx-datatable>
          </div>

      </div>

    </div>
  
</div>




  
