

 




 
    <div class="col-md-1 ng"> 
        <div class="list-group affix_dash "  id="sidebar">
        <a routerLink="/dashboard" class="list-group-item active main-color-bg">
  
        <i class="material-icons mg-icon">dashboard </i>
      </a>
      <a routerLink="/planning" class="list-group-item"> <i class="material-icons mg-icon">edit </i></a>
      <a routerLink="/tracking" class="list-group-item"> <i class="material-icons mg-icon">track_changes </i></a>
  
  
      <a routerLink="/missions" class="list-group-item"><i class="material-icons mg-icon">list </i> </a>
  
  
      <a routerLink="/driver" class="list-group-item"><i class="material-icons mg-icon">person</i> </a>
      <a routerLink="/groups" class="list-group-item"><i class="material-icons mg-icon">group</i> </a>
      <a routerLink="/cars" class="list-group-item"><i class="material-icons mg-icon">directions_car</i></a>
      
  
    </div>
  
  
  </div>
 
 

<div class="col-sm-11 pd">

  <div class="panel panel-default">
    <div class="panel-heading main-color-bg">
      <h3 class="panel-title panel-text" style="color:#ecf0f1;">Planification</h3>
    </div>
    <div class="panel-body">
      
          <div class=" col-md-offset-11">
              <button type="button" class="btn btn-success"  (click)="openDialog()">Add</button>
            </div>   
          
      <br>
      
        <div class=" col-md-offset-0">
          <ngx-datatable 
              #mydatatable
              class="material"
              [headerHeight]="50"
              [limit]="10"
              [columnMode]="'force'"
              [footerHeight]="50"
              [rowHeight]="'auto'"
              [rows]="rows">
              <ngx-datatable-column name="idPlanification">
                <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex"  let-row="row">
                  <span
                    title="Double click to edit"
                    (dblclick)="editing[rowIndex + '-idPlanification'] = true"
                    *ngIf="!editing[rowIndex + '-idPlanification']">
                    {{row.idplanification}}
                  </span>
                  <input
                    autofocus
                    (blur)="updateValue($event, 'idPlanification', rowIndex)"
                    *ngIf="editing[rowIndex+ '-idPlanification']"
                    type="text"
                    [value]="value"
                  />
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Les points d'interet"> 
                <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value" let-row="row">
                  <mat-form-field>
                    <mat-label>les points d'interet</mat-label>
                    <mat-select [(ngModel)]="poiSelected" multiple>
                      <mat-option *ngFor="let row of rows" [value]="row.name" >{{row.poi.adress}}</mat-option>
                    </mat-select>
                  </mat-form-field>
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="date_début">
                <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-value="value" let-row="row">
                  <span
                    title="Double click to edit"
                    (dblclick)="editing[rowIndex + '-date_fin'] = true"
                    *ngIf="!editing[rowIndex + '-date_fin']">
                    choisir date début
                  </span>
                  <input
                    autofocus
                    (blur)="updateValue($event, 'date_fin', rowIndex)"
                    *ngIf="editing[rowIndex+ '-date_fin']"
                    type="text"
                    [value]="value"
                  />
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="date_fin">
                <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex"  let-row="row">
                  <span
                    title="Double click to edit"
                    (dblclick)="editing[rowIndex + '-iddriver'] = true"
                    *ngIf="!editing[rowIndex + '-iddriver']">
                    choisir date fin
                  </span>
                  <input
                    autofocus
                    (blur)="updateValue($event, 'iddriver', rowIndex)"
                    *ngIf="editing[rowIndex+ '-iddriver']"
                    type="text"
                    [value]="value"
                  />
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Conducteur">
                <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex"  let-row="row">
                  <span
                    title="Double click to edit"
                    (dblclick)="editing[rowIndex + '-iddriver'] = true"
                    *ngIf="!editing[rowIndex + '-iddriver']">
                    choisir conducteur
                  </span>
                  <input
                    autofocus
                    (blur)="updateValue($event, 'iddriver', rowIndex)"
                    *ngIf="editing[rowIndex+ '-iddriver']"
                    type="text"
                    [value]="value"
                  />
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Vehicule">
                <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex"  let-row="row">
                  <span
                    title="Double click to edit"
                    (dblclick)="editing[rowIndex + '-idvehicule'] = true"
                    *ngIf="!editing[rowIndex + '-idvehicule']">
                    choisir vehicule
                  </span>
                  <input
                    autofocus
                    (blur)="updateValue($event, 'idvehicule', rowIndex)"
                    *ngIf="editing[rowIndex+ '-idvehicule']"
                    type="text"
                    [value]="value"
                  />
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Action" prop="idplanification" [sortable]="false">
                <ng-template let-rowIndex="rowIndex" let-id="value" ngx-datatable-cell-template>
                  <button class="btn btn-sm btn-danger" (click)="delete(id)">
                    <i class="fa fa-trash"></i> Delete
                  </button>
                  <button class="btn btn-sm btn-success rightpos" (click)="delete(id)">
                    <i class="fa fa-trash"></i> Ajouter mission
                  </button>
                  
                </ng-template>
              </ngx-datatable-column>
            </ngx-datatable>
        </div>
        
        <!-- <ul>
                          
          <li *ngFor="let a of rows; let iteration = index">
              <div class="">
                  <form class="form-inline" (ngSubmit)="addMission()">
                   
                    
                  <div class="form-group pd">
                      <label class="control-label col-sm-2 pd">Les points d'interet: </label>
                      <mat-form-field>
                        <mat-label>choisir les points d'interet</mat-label>
                        <mat-select [formControl]="toppings" multiple>
                          <mat-option *ngFor="let poi of poiList" [value]="poi.point_interest_id">{{poi.name}}</mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    
                    <div class="form-group">
                      <label class="control-label col-sm-2">date début:</label>
                      <div class="col-sm-4">
                        <input type="date"  id="email" placeholder="Enter date début" [(ngModel)]="mission.date_deb"
                          name="date_deb" ng-required='!contact.phone'>
                      </div>
                    </div>
                    <div class="form-group">
                      <label class="control-label col-sm-2">date fin:</label>
                      <div class="col-sm-4">
                        <input type="date" id="pwd" placeholder="Enter date fin" [(ngModel)]="mission.date_fin"
                          name="date_fin">
                      </div>
                    </div>
                    <div class="form-group">
                      <label class="control-label col-sm-2 pd">Nome du conducteur: </label>
                      <mat-form-field>
                        <mat-label>Choisir un conducteur</mat-label>
                        <mat-select [(ngModel)]="mission.id_driver" name="driver">
                          <mat-option *ngFor="let driver of dirverList" [value]="driver.driver_id">
                            {{driver.first_name}} {{driver.last_name}}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                    <div class="form-group">
                      <label class="control-label col-sm-2 pd">Vehicule: </label>
                      <mat-form-field>
                        <mat-label>Choisir un vehicule</mat-label>
                        <mat-select [(ngModel)]="mission.id_vehicule" name="driver">
                          <mat-option *ngFor="let car of carsList" [value]="car.vehicule_id">
                            {{car.mark}} {{car.matricule}}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                
                   
                    
                  </form>
                  <button class="btn btn-sm btn-danger " (click)="delete(id)">Delete</button>
                  <button type="submit" class="btn btn-success rightpos">Ajouter</button>
                
                  
                </div>
                <br>
          </li>
        </ul> -->
       
        
        
    </div>

  </div>


</div>

